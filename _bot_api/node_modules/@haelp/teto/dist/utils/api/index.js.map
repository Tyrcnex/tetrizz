{"version":3,"sources":["../../../src/utils/api/index.ts"],"sourcesContent":["// export * as API from \"./wrapper\";\nimport { CONSTANTS } from \"../constants\";\nimport { type Get, type Post, basic } from \"./basic\";\nimport { channel } from \"./channel\";\nimport { relationship } from \"./relationship\";\nimport { rooms } from \"./rooms\";\nimport { server } from \"./server\";\nimport { users } from \"./users\";\n\nexport interface APIDefaults {\n  token: string;\n  userAgent: string;\n  /** a cf_clearance Cloudflare turnstile token. */\n  turnstile: string | null;\n}\n\nexport class API {\n  readonly defaults: APIDefaults = {\n    token: \"\",\n    userAgent: CONSTANTS.userAgent,\n    turnstile: null\n  };\n\n  get!: Get;\n  post!: Post;\n\n  rooms!: ReturnType<typeof rooms>;\n  server!: ReturnType<typeof server>;\n  users!: ReturnType<typeof users>;\n  social!: ReturnType<typeof relationship>;\n  channel!: ReturnType<typeof channel>;\n\n  /** @hideconstructor */\n  constructor(options: Partial<APIDefaults> = {}) {\n    this.update(options);\n  }\n\n  update(options: Partial<APIDefaults> = {}) {\n    (Object.keys(options) as (keyof APIDefaults)[]).forEach((key) => {\n      this.defaults[key] = options[key]!;\n    });\n\n    const b = basic(this.defaults);\n    this.get = b.get;\n    this.post = b.post;\n\n    this.rooms = rooms(this.get, this.post, this.defaults);\n    this.server = server(this.get, this.post, this.defaults);\n    this.users = users(this.get, this.post, this.defaults);\n    this.social = relationship(this.get, this.post, this.defaults);\n    this.channel = channel(this.get, this.post, this.defaults);\n  }\n}\n\nexport * as APITypes from \"./wrapper\";\n"],"names":["API","APITypes","defaults","token","userAgent","CONSTANTS","turnstile","get","post","rooms","server","users","social","channel","options","update","Object","keys","forEach","key","b","basic","relationship"],"mappings":"AAAA,oCAAoC;;;;;;;;;;;;QAgBvBA;eAAAA;;QAsCDC;;;;2BArDc;uBACiB;yBACnB;8BACK;uBACP;wBACC;uBACD;iEA+CI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAtCnB,MAAMD;IACFE,WAAwB;QAC/BC,OAAO;QACPC,WAAWC,oBAAS,CAACD,SAAS;QAC9BE,WAAW;IACb,EAAE;IAEFC,IAAU;IACVC,KAAY;IAEZC,MAAiC;IACjCC,OAAmC;IACnCC,MAAiC;IACjCC,OAAyC;IACzCC,QAAqC;IAErC,qBAAqB,GACrB,YAAYC,UAAgC,CAAC,CAAC,CAAE;QAC9C,IAAI,CAACC,MAAM,CAACD;IACd;IAEAC,OAAOD,UAAgC,CAAC,CAAC,EAAE;QACxCE,OAAOC,IAAI,CAACH,SAAmCI,OAAO,CAAC,CAACC;YACvD,IAAI,CAACjB,QAAQ,CAACiB,IAAI,GAAGL,OAAO,CAACK,IAAI;QACnC;QAEA,MAAMC,IAAIC,IAAAA,YAAK,EAAC,IAAI,CAACnB,QAAQ;QAC7B,IAAI,CAACK,GAAG,GAAGa,EAAEb,GAAG;QAChB,IAAI,CAACC,IAAI,GAAGY,EAAEZ,IAAI;QAElB,IAAI,CAACC,KAAK,GAAGA,IAAAA,YAAK,EAAC,IAAI,CAACF,GAAG,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAACN,QAAQ;QACrD,IAAI,CAACQ,MAAM,GAAGA,IAAAA,cAAM,EAAC,IAAI,CAACH,GAAG,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAACN,QAAQ;QACvD,IAAI,CAACS,KAAK,GAAGA,IAAAA,YAAK,EAAC,IAAI,CAACJ,GAAG,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAACN,QAAQ;QACrD,IAAI,CAACU,MAAM,GAAGU,IAAAA,0BAAY,EAAC,IAAI,CAACf,GAAG,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAACN,QAAQ;QAC7D,IAAI,CAACW,OAAO,GAAGA,IAAAA,gBAAO,EAAC,IAAI,CAACN,GAAG,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAACN,QAAQ;IAC3D;AACF"}